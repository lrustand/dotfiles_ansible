- name: Refresh package list
  block:
    - name: pacman -Sy
      community.general.pacman:
        update_cache: yes
      become: yes
      when: ansible_distribution == 'Archlinux'

    - name: apt update
      command: apt update
      become: yes
      when: ansible_os_family == 'Debian'

- name: Upgrade system
  community.general.pacman:
    upgrade: yes
  become: yes
  when: ansible_distribution == 'Archlinux'

- name: Install base-devel
  package:
    name:
      - base
      - base-devel
      - ntp
    state: present
  become: yes
  when: ansible_distribution == 'Archlinux'

- name: Install sudo
  package:
    name:
      - sudo
    state: present
  become: yes
  when: ansible_distribution == 'FreeBSD'

- name: Install acl
  package:
    name:
      - acl
    state: present
  become: yes
  when: ansible_os_family == 'Debian'

- name: Install developer tools
  block:
    - name: Install developer tools
      package:
        name:
          - git
          - htop
          - openssh
          - python
          - ipython
          - tree
          - ncdu
          - fzf
          - unzip
          - cmake
          - pciutils
          - usbutils
          - man
        state: present
      become: yes
      when: ansible_distribution == 'Archlinux'

    - name: Install developer tools
      package:
        name:
          - git
          - htop
          - python3
          - tree
          - ncdu
          - fzf
          - unzip
          - cmake
          - pciutils
          - usbutils
          - man
        state: present
      become: yes
      when: ansible_os_family == 'Debian'

- name: Install GUI programs
  package:
    name:
      - pavucontrol
      - okular
      - feh
      - mpv
    state: present
  become: yes
